PROJECT (OpenSim)

IF(NOT CMAKE_BUILD_TYPE)
  SET(CMAKE_BUILD_TYPE Debug CACHE STRING
      "Choose the type of build, options are: None Debug Release RelWithDebInfo MinSizeRel."
      FORCE)
ENDIF(NOT CMAKE_BUILD_TYPE)

SET(RDI_ARCH $ENV{RDI_ARCH})
IF(WIN32)
	IF(${RDI_ARCH} MATCHES ".+")
	ELSE(${RDI_ARCH} MATCHES ".+")
		SET(RDI_ARCH VC71)
	ENDIF(${RDI_ARCH} MATCHES ".+")
ENDIF(WIN32)

IF(WIN32)
	SET(SIMTK_OPENSIM_INSTALL_DIR "c:/Program Files/SimTK/OpenSim")
ELSE(WIN32)
	SET(SIMTK_OPENSIM_INSTALL_DIR "/usr/local/SimTK/OpenSim")
ENDIF(WIN32)

IF(NOT LIBRARY_OUTPUT_PATH)
  SET(LIBRARY_OUTPUT_PATH ${OpenSim_BINARY_DIR}/${RDI_ARCH} CACHE INTERNAL "Single output directory for building all libraries.")
ENDIF(NOT LIBRARY_OUTPUT_PATH)
IF(NOT EXECUTABLE_OUTPUT_PATH)
  SET(EXECUTABLE_OUTPUT_PATH ${OpenSim_BINARY_DIR}/${RDI_ARCH} CACHE INTERNAL "Single output directory for building all executables.")
ENDIF(NOT EXECUTABLE_OUTPUT_PATH)
SET(OpenSim_LIBRARY_DIR ${LIBRARY_OUTPUT_PATH})
SET(OpenSim_EXECUTABLE_DIR ${EXECUTABLE_OUTPUT_PATH})
SET(CMAKE_DEBUG_POSTFIX "_d" CACHE INTERNAL "" FORCE)

SET(CMAKE_INSTALL_PREFIX ${SIMTK_OPENSIM_INSTALL_DIR})

IF(WIN32)
	IF(RDI_ARCH MATCHES "VC7*")
		LINK_DIRECTORIES(${OpenSim_SOURCE_DIR}/Vendors/xerces-c-src2_4_0/Build/Win32/VC7/${CMAKE_CFG_INTDIR})
	ELSE (RDI_ARCH MATCHES "VC7*")
		LINK_DIRECTORIES(${OpenSim_SOURCE_DIR}/Vendors/xerces-c-src2_4_0/Build/Win32/VC6/${CMAKE_CFG_INTDIR})	
	ENDIF(RDI_ARCH MATCHES "VC7*")
ENDIF(WIN32)

INCLUDE (Dart)

#
# Build the documentation
#

#-----------------------------------------------------------------------------
SUBDIRS(Vendors OpenSim)
