<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Getting Started with Static Optimization</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            OpenSim Documentation : Getting Started with Static Optimization
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 30, 2012 by <font color="#0050B2">jenhicks</font>.
				    </div>
                    <div class="wiki-content" style="margin-left: 0.0px;"><p>The figure below shows the required inputs and outputs for the Static Optimization Tool. Each is described in more detail in the following sections:</p><p><div>
<ul>
    <li><a href='#GettingStartedwithStaticOptimization-Inputs'>Inputs</a></li>
    <li><a href='#GettingStartedwithStaticOptimization-Outputs'>Outputs</a></li>
    <li><a href='#GettingStartedwithStaticOptimization-BestPracticesandTroubleshooting'>Best Practices and Troubleshooting</a></li>
</ul></div></p><p> </p><div class="panelMacro"><p> </p><div class="table-wrap"><table class="confluenceTable"><colgroup><col /><col /></colgroup><tbody><tr class="confluenceTr"><td class="confluenceTd"><img class="confluence-embedded-image confluence-external-resource" height="16" width="16" src="images/icons/emoticons/information.gif" data-image-src="http://simtk-confluence.stanford.edu:8080/images/icons/emoticons/information.gif"></td><td class="confluenceTd">Note: The following file names are examples that can be found in the examples/Gait2354_Simbody directory installed with the OpenSim distribution.</td></tr></tbody></table></div><p> </p></div><p><img class="confluence-embedded-image confluence-external-resource" height="92" width="600" src="attachments/1443213/1900743.png" data-image-src="http://simtk-confluence.stanford.edu:8080/download/attachments/1443213/worddav4537fa82b290e4289f1d23553ff702f9.png?version=1&amp;modificationDate=1322501680592"></p><p><strong>Figure</strong><strong>:</strong> <strong>Inputs and Outputs of the Static Optimization Tool.</strong> Experimental data are shown in <span style="color: rgb(0,204,153);">green</span>; OpenSim files (.osim) are shown in <span style="color: rgb(165,0,33);">red</span>; settings files are shown in <span style="color: rgb(51,102,255);">blue</span>; files generated by the workflow are shown in <span style="color: rgb(153,51,255);">purple</span>. To run static optimization, you use the analyze command.</p><p>To launch the Static Optimization Tool, select <strong>Static Optimization…</strong> from the <strong>Tools</strong> menu. The <em>Static Optimization Tool</em> dialog window, like all other OpenSim tools, operates on the current model open and selected in OpenSim </p><h2 id="GettingStartedwithStaticOptimization-Inputs">Inputs</h2><p>Three files are required as input by the Static Optimization Tool:</p><p><span style="color: rgb(153,51,255);"><strong>subject01_walk1_ik.mot</strong></span>: Motion file containing the time histories of generalized coordinates that describe the movement of the model. This can be kinematic data (i.e., joint angles) from IK or states (i.e., joint angles AND velocities) from RRA and the time range of interest.</p><p><span style="color: rgb(0,204,153);"><strong>subject01_walk1_grf.xml</strong></span>: External load data (i.e., ground reaction forces, moments, and center of pressure location). Note that you must measure or model all external forces acting on a subject during the motion to calculate accurate muscle forces. The xml file describes how to apply the measured ground reaction forces to the model during the analysis. </p><p><strong>subject01_simbody.osim</strong>: A subject-specific OpenSim model generated by scaling a generic model with the Scale Tool or by other means, along with an associated marker set containing adjusted virtual markers. The model must include inertial parameters (segment masses, etc.).</p><p><strong><span style="color: rgb(0,0,255);">x</span>:</strong> The exponent for the activation-based cost function, to be minimized (i.e., the criteria used to solve muscle force distribution problem).</p><h2 id="GettingStartedwithStaticOptimization-Outputs">Outputs</h2><p>The Static Optimization Tool generates three files in a specified folder:</p><p><span style="color: rgb(192,0,0);"><strong>subject01_walk1_StaticOptimization_controls.xml</strong></span>: Contains the time histories of muscle activations. These controls were minimized by the Static Optimization Tool.</p><p><span style="color: rgb(192,0,0);"><strong>subject01_walk1_StaticOptimization_activation.sto</strong></span>: Storage file containing the time histories of muscle activations.</p><p><span style="color: rgb(192,0,0);"><strong>subject01_walk1_StaticOptimization_force.sto</strong></span>: Storage file containing the time histories of muscle forces.</p><h2 id="GettingStartedwithStaticOptimization-BestPracticesandTroubleshooting">Best Practices and Troubleshooting</h2><p><ol><li>You can use IK or RRA results as input kinematics.  If using IK results, you usually need to filter them, either externally or using the OpenSim analyze/static optimization field.  If using RRA results, you usually do not have to filter.</li><li>Add residual actuators to the first free joint in the model (typically the ground-pelvis joint).</li><li>If the actuators/muscles are weak, the optimization will take a long time to converge or never converge at all.  This takes a long time.  If troubleshooting a weak model and each time, optimization is slow, try reducing the parameter that defines the max number of iterations.</li><li>Increase the maximum control value of a residual or reserve actuator, while lowering its maximum force. This allows the optimizer to generate a large force (if necessary) to match accelerations but large control values are penalized more heavily. In static optimization, ideal actuator excitations are treated as activations in the cost function.</li></ol></p></div><div class="pageSection group"><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/How+Static+Optimization+Works">How Static Optimization Works</a></p><p>Home: <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Static+Optimization">Static Optimization</a></p>
</div></div></div>
				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 02, 2012 10:52</font></td>
		    </tr>
	    </table>
    </body>
</html>
