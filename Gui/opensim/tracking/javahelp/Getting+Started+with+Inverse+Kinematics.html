<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Getting Started with Inverse Kinematics</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            OpenSim Documentation : Getting Started with Inverse Kinematics
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 30, 2012 by <font color="#0050B2">jenhicks</font>.
				    </div>
                    <div class="wiki-content" style="margin-left: 0.0px;"><div><p>This section covers:</p><ul><li><a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Inverse+Kinematics#InverseKinematics-Overview" rel="nofollow">Overview</a></li><li><a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Inverse+Kinematics#InverseKinematics-Inputs" rel="nofollow">Inputs</a></li><li><a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Inverse+Kinematics#InverseKinematics-Outputs" rel="nofollow">Outputs</a></li><li><a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Inverse+Kinematics#InverseKinematics-BestPracticesandTroubleshooting" rel="nofollow">Best Practices and Troubleshooting</a></li></ul></div><p> </p><p>The sections that follow provide more detailed information about the theory and using the IK Tool. Getting accurate results from the IK tool is essential for using later tools like Static Optimization, Residual Reduction Algorithm, and Computed Muscle Control.</p><p>To launch the IK Tool, select <strong>Tools</strong> → <strong>Inverse Kinematics</strong> from the OpenSim main menu bar.</p><p>The Inverse Kinematics Tool steps through each time frame of experimental data and positions the model in a pose that &quot;best matches&quot; experimental marker and coordinate data for that time step. This &quot;best match&quot; is the pose that minimizes a sum of weighted squared errors of markers and/or coordinates.</p><p><img class="confluence-embedded-image confluence-external-resource" src="download/attachments/886047/1885883908" data-image-src="http://simtk-confluence.stanford.edu:8080/download/attachments/886047/image2011-11-17+16%3A14%3A39.png?version=1&amp;modificationDate=1321574811121"><br /><strong>Figure</strong><strong>: Inverse Kinematics (IK) Tool Overview.</strong> Experimental markers are matched by model markers throughout the motion by varying the joint angles (generalized coordinates) through time.</p><h1 id="GettingStartedwithInverseKinematics-Overview">Overview</h1><p><img class="confluence-embedded-image confluence-external-resource" src="download/attachments/886047/74570228" data-image-src="http://simtk-confluence.stanford.edu:8080/download/attachments/886047/image2011-11-17+16%3A14%3A55.png?version=1&amp;modificationDate=1321574826295"><br /><strong>Figure</strong><strong>: Inputs and Outputs of the IK Tool.</strong> Experimental data are shown in <span style="color: rgb(0,176,80);">green</span>; OpenSim files (.osim) are shown in <span style="color: rgb(148,54,52);">red</span>; settings files are shown in <span style="color: rgb(0,0,255);">blue</span>.</p><div class="panelMacro"><p> </p><div class="table-wrap"><table class="confluenceTable"><colgroup><col /><col /></colgroup><tbody><tr class="confluenceTr"><td class="confluenceTd"><img class="confluence-embedded-image confluence-external-resource" height="16" width="16" src="images/icons/emoticons/warning.gif" data-image-src="http://simtk-confluence.stanford.edu:8080/images/icons/emoticons/warning.gif"></td><td class="confluenceTd">Note: These file names are examples that can be found in the examples/Gait2354_Simbody directory installed with the OpenSim distribution.</td></tr></tbody></table></div><p> </p></div><h1 id="GettingStartedwithInverseKinematics-Inputs">Inputs</h1><p>The primary inputs to IK are the following files:</p><ol><li><span style="color: rgb(128,0,0);">subject01_simbody.osim</span>: A subject-specific OpenSim model generated by scaling a generic model with the Scale Tool or by other means, along with an associated marker set containing adjusted virtual markers.</li><li><span style="color: rgb(0,128,0);">subject01_walk1.trc</span>: Experimental marker trajectories for a trial obtained from a motion capture system, along with the time range of interest</li><li><span style="color: rgb(0,0,255);">gait2354_IK_tasks.xml</span>: A file containing marker weightings. As in the scale tool, marker weights are relative and determine how &quot;well&quot; the virtual markers track experimental markers (i.e., a larger weight will mean less error between virtual and experimental marker positions).</li><li><span style="color: rgb(0,128,0);">subject01_coords.mot</span> (optional): Experimental generalized coordinate values (joint angles) for a trial obtained from alternative motion capture devices or other specialized algorithms. You can optionally specify relative coordinate weights in the Tasks file, if joint angles are known a priori.</li></ol><h1 id="GettingStartedwithInverseKinematics-Outputs">Outputs</h1><ol><li><span style="color: rgb(102,0,102);">subject01_walk1_ik.mot</span>: A motion file containing the generalized coordinate trajectories (joint angles and/or translations) computed by IK.</li></ol><h1 id="GettingStartedwithInverseKinematics-BestPracticesandTroubleshooting">Best Practices and Troubleshooting</h1><p><ol><li>When collecting experimental data, place three non-collinear markers per body segment that you want to track. You need at least three markers to track the 6 DOF motion (position and orientation) of a body segment.</li><li>Place markers on anatomical locations with minimum skin/muscle motion.</li><li>Weight &quot;motion&quot; segment markers, for example from a triad placed on the thigh segment, more heavily than anatomical markers affixed to landmarks like the greater trochanter and the acromion, which can be helpful for scaling, but are influenced by muscle and other soft tissue movements during motion.</li><li>Relative marker weightings are more important than their absolute values. Therefore, a weighting of 10 vs. 1 is 10 times more important whereas 20 vs. 10 is only twice as important. Markers are not necessarily tracked better because they both have higher weightings.</li><li>Total RMS and max marker errors are reported in the messages window. Use these values to guide changes in weightings, or if necessary to redo marker placement and possibly scaling. Maximum marker error should generally be less than 2-4cm and RMS under 2cm is achievable.</li><li>Compare your results to similar data reported in the literature. Your results from an unimpaired average adult should generally be within one standard deviation.</li></ol></p><p> </p><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/How+Inverse+Kinematics+Works">How Inverse Kinematics Works</a></p><p>Home: <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Inverse+Kinematics">Inverse Kinematics</a></p>
</div></div><p> </p></div><div class="pageSection group"> </div>
				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 02, 2012 10:52</font></td>
		    </tr>
	    </table>
    </body>
</html>
