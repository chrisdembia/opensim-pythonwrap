<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Getting Started with Forward Dynamics</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            OpenSim Documentation : Getting Started with Forward Dynamics
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Jan 30, 2012 by <font color="#0050B2">jenhicks</font>.
				    </div>
                    <div class="wiki-content" style="margin-left: 0.0px;"><p>To launch the Forward Dynamics Tool select <strong>Forward Dynamics…</strong> from the <strong>Tools</strong> menu. The <strong>Forward Dynamics Tool</strong> dialog like all other OpenSim tools operates on the<em>Current Model</em> open and selected in OpenSim.</p><h2 id="GettingStartedwithForwardDynamics-InputsandOutputs">Inputs and Outputs</h2><p>The figure shows the required inputs and outputs for the Forward Dynamics Tool. Each is described in more detail in the following sections.</p><div class="panelMacro"><p> </p><div class="table-wrap"><table class="confluenceTable"><colgroup><col /><col /></colgroup><tbody><tr class="confluenceTr"><td class="confluenceTd"><img class="confluence-embedded-image confluence-external-resource" height="16" width="16" src="images/icons/emoticons/information.gif" data-image-src="http://simtk-confluence.stanford.edu:8080/images/icons/emoticons/information.gif"></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">The following file names are examples that can be found in the examples/Gait2354_Simbody directory installed with the OpenSim distribution.</span></td></tr></tbody></table></div><p> </p></div><p><br class="atl-forced-newline" /><img class="confluence-embedded-image confluence-external-resource" height="146" width="394" src="attachments/1443217/1900757.png" data-image-src="http://simtk-confluence.stanford.edu:8080/download/attachments/1443217/worddavc139075d021ecb075008536eb95029b1.png?version=1&amp;modificationDate=1322501681711"></p><p><strong>Figure</strong><strong>: Inputs and Outputs of the Forward Dynamics Tool.</strong> Experimental data are shown in <span style="color: rgb(0,204,153);">green</span>; OpenSim files (.osim) are shown in <span style="color: rgb(165,0,33);">red</span>; settings files are shown in <span style="color: rgb(51,102,255);">blue</span>; files generated by the workflow are shown in <span style="color: rgb(153,51,255);">purple</span>.</p><h2 id="GettingStartedwithForwardDynamics-Inputs">Inputs</h2><p>Four data files are required as input by the Forward Dynamics Tool:</p><p><span style="color: rgb(153,51,255);"><strong>subject01_walk1_controls.xml</strong></span>: Contains the time histories of the model controls (e.g., muscle excitations) to the muscles and/or joint torques. It is possible to specify the controls as .sto file instead with columns corresponding to desired excitations. This file may be generated by the user, Static Optimization Tool, or Computed Muscle Control Tool. If no controls are provided they are assumed to be zero for any actuators in the model.</p><p><span style="color: rgb(153,51,255);"><strong>subject01_walk1_states.sto</strong></span>: Contains the time histories of model states, including joint angles, joint speeds, muscle activations, muscle activations, muscle fiber lengths, and more. These states are used by the Forward Dynamics Tool to set the initial states of the model for forward integration. Alternately, the simulation can begin from the default pose of the model in without providing initial states. Muscle states are estimated by solving for muscle-fiber and tendon force equilibrium.</p><p><span style="color: rgb(0,204,153);"><strong>subject01_walk1_grf.xml</strong></span>: An xml file describing the External Loads applied based (for example) on measured ground reaction forces that should be applied to the model during simulation</p><p><span style="color: rgb(165,0,33);"><strong>subject01_simbody_adjusted.osim</strong></span>:  Subject-specific OpenSim model generated by scaling a generic model with the Scale Tool or by other means, along with an associated marker set containing adjusted virtual markers. The model must include inertial parameters (segment masses, etc.).</p><p>The <span style="color: rgb(51,102,255);"><strong>subject01_Setup_Forward.xml</strong></span> file is the setup file for the Forward Dynamics Tool. It contains settings, as described in XXXXX, and refers to another settings file, <span style="color: rgb(51,102,255);"><strong>gait2354_CMC_Actuators.xml</strong></span> which contains a set of actuators that supplement the muscles of the model. Refer to <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Computed+Muscle+Control" rel="nofollow">Computed Muscle Control</a> for more details. These actuators must be included in the forward simulation so that the CMC solution can be reproduced.</p><h2 id="GettingStartedwithForwardDynamics-Outputs">Outputs</h2><p>The Forward Dynamics tool generates results in a folder specified in the setup file:</p><p><span style="color: rgb(153,51,255);"><strong>Results</strong></span>: Additional data can be generated and written to files by adding analyses to the Forward Dynamics Tool. These analyses are specified in the setup file (<span style="color: rgb(51,102,255);"><strong>subject01_Setup_Forward.xml</strong></span>) and are discussed in the <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Analyses">Analyses</a> section.</p><h2 id="GettingStartedwithForwardDynamics-BestPracticesandTroubleshootingTips" class="pageSection group">Best Practices and Troubleshooting Tips</h2><p><ol><li>Forward dynamics simulations are sensitive to initial conditions and it is good practice to double check that they are appropriate for the desired simulation.</li><li>If the Forward Tool fails gracefully (i.e., without crashing OpenSim) or the output of the Forward Tool drifts too much (i.e., the model goes crazy), shorten the interval over which the Forward Tool runs (i.e., make initial_time and final_time closer to each other in the Forward Tool setup dialog box or setup file).  Open-loop forward dynamics tends to drift over time due to the accumulation of numerical errors during integration.</li></ol></p></div><div class="pageSection group"><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/How+Forward+Dynamics+Works">How Forward Dynamics Works</a></p><p>Home: <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Forward+Dynamics">Forward Dynamics</a></p>
</div></div><p> </p> </div>
				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 02, 2012 10:52</font></td>
		    </tr>
	    </table>
    </body>
</html>
