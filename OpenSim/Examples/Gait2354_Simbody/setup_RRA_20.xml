<?xml version="1.0" encoding="UTF-8"?>
<OpenSimDocument Version="10904">
	<CMCTool name="subject01_walk1_RRA">
		<defaults>
			<ControlLinear name="default">
				<is_model_control> true </is_model_control>
				<extrapolate> true </extrapolate>
				<default_min>      -1.00000000 </default_min>
				<default_max>       1.00000000 </default_max>
				<filter_on> false </filter_on>
				<use_steps> false </use_steps>
				<x_nodes/>
				<min_nodes/>
				<max_nodes/>
				<kp>     100.00000000 </kp>
				<kv>      20.00000000 </kv>
			</ControlLinear>
			<Thelen2003Muscle name="default">
				<GeometryPath name="">
					<PathPointSet name="">
						<objects/>
						<groups/>
					</PathPointSet>
					<VisibleObject name="">
						<geometry_files> </geometry_files>
						<VisibleProperties name="">
							<display_preference> 4 </display_preference>
							<show_normals> false </show_normals>
							<show_axes> false </show_axes>
							<material_name> DEFAULT </material_name>
						</VisibleProperties>
						<scale_factors>       1.00000000       1.00000000       1.00000000 </scale_factors>
					</VisibleObject>
					<PathWrapSet name="">
						<objects/>
						<groups/>
					</PathWrapSet>
				</GeometryPath>
				<!--maximum isometric force of the muscle fibers-->
				<max_isometric_force>     546.00000000 </max_isometric_force>
				<!--optimal length of the muscle fibers-->
				<optimal_fiber_length>       0.05350000 </optimal_fiber_length>
				<!--resting length of the tendon-->
				<tendon_slack_length>       0.07800000 </tendon_slack_length>
				<!--angle between tendon and fibers at optimal fiber length-->
				<pennation_angle>       0.00000000 </pennation_angle>
				<!--time constant for ramping up of muscle activation-->
				<activation_time_constant>       0.01000000 </activation_time_constant>
				<!--time constant for ramping down of muscle activation-->
				<deactivation_time_constant>       0.04000000 </deactivation_time_constant>
				<!--maximum contraction velocity at full activation in fiber lengths per
				    second-->
				<Vmax>      10.00000000 </Vmax>
				<!--maximum contraction velocity at low activation in fiber lengths per
				    second-->
				<Vmax0>       5.00000000 </Vmax0>
				<!--tendon strain due to maximum isometric muscle force-->
				<FmaxTendonStrain>       0.03300000 </FmaxTendonStrain>
				<!--passive muscle strain due to maximum isometric muscle force-->
				<FmaxMuscleStrain>       0.60000000 </FmaxMuscleStrain>
				<!--shape factor for Gaussian active muscle force-length relationship-->
				<KshapeActive>       0.50000000 </KshapeActive>
				<!--exponential shape factor for passive force-length relationship-->
				<KshapePassive>       4.00000000 </KshapePassive>
				<!--passive damping in the force-velocity relationship-->
				<damping>       0.05000000 </damping>
				<!--force-velocity shape factor-->
				<Af>       0.30000000 </Af>
				<!--maximum normalized lengthening force-->
				<Flen>       1.80000000 </Flen>
			</Thelen2003Muscle>
			<Schutte1993Muscle name="default">
				<GeometryPath name="">
					<PathPointSet name="">
						<objects/>
						<groups/>
					</PathPointSet>
					<VisibleObject name="">
						<geometry_files> </geometry_files>
						<VisibleProperties name="">
							<display_preference> 4 </display_preference>
							<show_normals> false </show_normals>
							<show_axes> false </show_axes>
							<material_name> DEFAULT </material_name>
						</VisibleProperties>
						<scale_factors>       1.00000000       1.00000000       1.00000000 </scale_factors>
					</VisibleObject>
					<PathWrapSet name="">
						<objects/>
						<groups/>
					</PathWrapSet>
				</GeometryPath>
				<!--Scale factor for normalizing time-->
				<time_scale>       0.10000000 </time_scale>
				<!--Parameter used in time constant of ramping up of muscle force-->
				<activation1>       0.00000000 </activation1>
				<!--Parameter used in time constant of ramping up and ramping down of
				    muscle force-->
				<activation2>       0.00000000 </activation2>
				<!--Maximum isometric force that the fibers can generate-->
				<max_isometric_force>       0.00000000 </max_isometric_force>
				<!--Optimal length of the muscle fibers-->
				<optimal_fiber_length>       0.00000000 </optimal_fiber_length>
				<!--Resting length of the tendon-->
				<tendon_slack_length>       0.00000000 </tendon_slack_length>
				<!--Angle between tendon and fibers at optimal fiber length-->
				<pennation_angle>       0.00000000 </pennation_angle>
				<!--Maximum contraction velocity of the fibers, in optimal fiberlengths
				    per second-->
				<max_contraction_velocity>      10.00000000 </max_contraction_velocity>
				<!--Damping factor related to maximum contraction velocity-->
				<damping>       0.05000000 </damping>
				<!--Function representing force-length behavior of tendon-->
				<tendon_force_length_curve>
					<NaturalCubicSpline name="">
						<x>     -10.00000000      -0.00200000      -0.00100000       0.00000000       0.00131000       0.00281000       0.00431000       0.00581000       0.00731000       0.00881000       0.01030000       0.01180000       0.01230000       9.20000000       9.20100000       9.20200000      20.00000000 </x>
						<y>       0.00000000       0.00000000       0.00000000       0.00000000       0.01080000       0.02570000       0.04350000       0.06520000       0.09150000       0.12300000       0.16100000       0.20800000       0.22700000     345.00000000     345.00000000     345.00000000     345.00000000 </y>
					</NaturalCubicSpline>
				</tendon_force_length_curve>
				<!--Function representing active force-length behavior of muscle fibers-->
				<active_force_length_curve>
					<NaturalCubicSpline name="">
						<x>      -5.30769200      -4.30769200      -1.92307700      -0.88461500      -0.26923100       0.23076900       0.46153800       0.52725000       0.62875000       0.71875000       0.86125000       1.04500000       1.21750000       1.43875000       1.50000000       1.61538500       2.00000000       2.96153800       3.69230800       5.46153800       9.90190200 </x>
						<y>       0.01218800       0.02189900       0.03646600       0.05249300       0.07531200       0.11415800       0.15785900       0.22666700       0.63666700       0.85666700       0.95000000       0.99333300       0.77000000       0.24666700       0.19382100       0.13325200       0.07268300       0.04441700       0.03634100       0.02189900       0.00733200 </y>
					</NaturalCubicSpline>
				</active_force_length_curve>
				<!--Function representing passive force-length behavior of muscle fibers-->
				<passive_force_length_curve>
					<NaturalCubicSpline name="">
						<x>      -5.00000000       0.99800000       0.99900000       1.00000000       1.10000000       1.20000000       1.30000000       1.40000000       1.50000000       1.60000000       1.60100000       1.60200000       5.00000000 </x>
						<y>       0.00000000       0.00000000       0.00000000       0.00000000       0.03500000       0.12000000       0.26000000       0.55000000       1.17000000       2.00000000       2.00000000       2.00000000       2.00000000 </y>
					</NaturalCubicSpline>
				</passive_force_length_curve>
				<!--Function representing force-velocity behavior of muscle fibers-->
				<force_velocity_curve>
					<NaturalCubicSpline name="">
						<x>      -1.00000000      -0.95000000      -0.90000000      -0.85000000      -0.80000000      -0.75000000      -0.70000000      -0.65000000      -0.60000000      -0.55000000      -0.50000000      -0.45000000      -0.40000000      -0.35000000      -0.30000000      -0.25000000      -0.20000000      -0.15000000      -0.10000000      -0.05000000       0.00000000       0.05000000       0.10000000       0.15000000       0.20000000       0.25000000       0.30000000       0.35000000       0.40000000       0.45000000       0.50000000       0.55000000       0.60000000       0.65000000       0.70000000       0.75000000       0.80000000       0.85000000       0.90000000       0.95000000       1.00000000 </x>
						<y>       0.00000000       0.01041700       0.02173900       0.03409100       0.04761900       0.06250000       0.07894700       0.09722200       0.11764700       0.14062500       0.16666700       0.19642900       0.23076900       0.27083300       0.31818200       0.37500000       0.44444400       0.53125000       0.64285700       0.79166700       1.00000000       1.48201400       1.60157100       1.65579100       1.68673900       1.70675100       1.72075300       1.73109900       1.73905500       1.74536500       1.75049000       1.75473600       1.75831200       1.76136400       1.76399900       1.76629800       1.76832100       1.77011500       1.77171700       1.77315500       1.77445500 </y>
					</NaturalCubicSpline>
				</force_velocity_curve>
			</Schutte1993Muscle>
		</defaults>
		<!--Name of the .osim file used to construct a model.-->
		<model_file> subject01_simbody.osim </model_file>
		<!--Replace the model's force set with sets specified in
		    <force_set_files>? If false, the force set is appended to.-->
		<replace_force_set> false </replace_force_set>
		<!--List of xml files used to construct an force set for the model.-->
		<force_set_files> gait2354_RRA_Actuators.xml </force_set_files>
		<!--Directory used for writing results.-->
		<results_directory> ResultsRRA </results_directory>
		<!--Output precision.  It is 20 by default.-->
		<output_precision> 20 </output_precision>
		<!--Initial time for the simulation.-->
		<initial_time>       0.75000000 </initial_time>
		<!--Final time for the simulation.-->
		<final_time>       1.25000000 </final_time>
		<!--Flag indicating whether or not to compute equilibrium values for
		    states other than the coordinates or speeds.  For example, equilibrium
		    muscle fiber lengths or muscle forces.-->
		<solve_for_equilibrium_for_auxiliary_states> false </solve_for_equilibrium_for_auxiliary_states>
		<!--Maximum number of integrator steps.-->
		<maximum_number_of_integrator_steps> 20000 </maximum_number_of_integrator_steps>
		<!--Maximum integration step size.-->
		<maximum_integrator_step_size>       0.00100000 </maximum_integrator_step_size>
		<!--Minimum integration step size.-->
		<minimum_integrator_step_size>       0.00000001 </minimum_integrator_step_size>
		<!--Integrator error tolerance. When the error is greater, the integrator
		    step size is decreased.-->
		<integrator_error_tolerance>       0.00010000 </integrator_error_tolerance>
		<!--Set of analyses to be run during the investigation.-->
		<AnalysisSet name="Analyses">
			<objects/>
			<groups/>
		</AnalysisSet>
		<!--Controller objects in the model.-->
		<ControllerSet name="Controllers">
			<objects/>
			<groups/>
		</ControllerSet>
		<!--Motion (.mot) or storage (.sto) file containing the desired point
		    trajectories.-->
		<desired_points_file>  </desired_points_file>
		<!--Motion (.mot) or storage (.sto) file containing the desired kinematic
		    trajectories.-->
		<desired_kinematics_file> subject01_walk1_ik.mot </desired_kinematics_file>
		<!--Motion file (.mot) or storage file (.sto) containing the external
		    loads applied to the model.-->
		<external_loads_file> subject01_walk1_grf.mot </external_loads_file>
		<!--Motion file (.mot) or storage file (.sto) containing the model
		    kinematics corresponding to the external loads.-->
		<external_loads_model_kinematics_file> subject01_walk1_ik.mot </external_loads_model_kinematics_file>
		<!--Name of the body to which the first set of external loads should be
		    applied (e.g., the name of the right foot).-->
		<external_loads_body1> calcn_r </external_loads_body1>
		<!--Name of the body to which the second set of external loads should be
		    applied (e.g., the name of the left foot).-->
		<external_loads_body2> calcn_l </external_loads_body2>
		<!--File containing the tracking tasks. Which coordinates are tracked and
		    with what weights are specified here.-->
		<task_set_file> gait2354_RRA_Tasks.xml </task_set_file>
		<!--File containing the constraints on the controls.-->
		<constraints_file> gait2354_RRA_ControlConstraints.xml </constraints_file>
		<!--File containing the controls output by RRA. These can be used to place
		    constraints on the residuals during CMC.-->
		<rra_controls_file>  </rra_controls_file>
		<!--Low-pass cut-off frequency for filtering the desired kinematics. A
		    negative value results in no filtering. The default value is -1.0, so
		    no filtering.-->
		<lowpass_cutoff_frequency>       6.00000000 </lowpass_cutoff_frequency>
		<!--Low-pass cut-off frequency for filtering the model kinematics
		    corresponding to the external loads. A negative value results in no
		    filtering. The default value is -1.0, so no filtering.-->
		<lowpass_cutoff_frequency_for_load_kinematics>       6.00000000 </lowpass_cutoff_frequency_for_load_kinematics>
		<!--Time window over which the desired actuator forces are achieved.
		    Muscles forces cannot change instantaneously, so a finite time window
		    must be allowed. The recommended time window for RRA is about 0.001
		    sec, and for CMC is about 0.010 sec.-->
		<cmc_time_window>       0.00100000 </cmc_time_window>
		<!--Flag (true or false) indicating whether or not to use the curvature
		    filter. Setting this flag to true can reduce oscillations in the
		    computed muscle excitations.-->
		<use_curvature_filter> false </use_curvature_filter>
		<!--Flag (true or false) indicating whether or not to use reflexes.  This
		    is a hook for users wanting to modify controls based on additonal
		    information.-->
		<use_reflexes> false </use_reflexes>
		<!--Flag (true or false) indicating whether to use the fast CMC
		    optimization target. The fast target requires the desired
		    accelerations to be met. The optimizer fails if the acclerations
		    constraints cannot be met, so the fast target can be less robust.  The
		    regular target does not require the acceleration constraints to be
		    met; it meets them as well as it can, but it is slower and less
		    accurate.-->
		<use_fast_optimization_target> false </use_fast_optimization_target>
		<!--Preferred optimizer algorithm (currently support "ipopt" or "cfsqp",
		    the latter requiring the osimFSQP library.-->
		<optimizer_algorithm> ipopt </optimizer_algorithm>
		<!--Perturbation size used by the optimizer to compute numerical
		    derivatives. A value between 1.0e-4 and 1.0e-8 is usually
		    approprieate.-->
		<optimizer_derivative_dx>       0.00010000 </optimizer_derivative_dx>
		<!--Convergence criterion for the optimizer. The smaller this value, the
		    deeper the convergence. Decreasing this number can improve a solution,
		    but will also likely increase computation time.-->
		<optimizer_convergence_criterion>       0.00000100 </optimizer_convergence_criterion>
		<!--Maximum number of iterations for the optimizer.-->
		<optimizer_max_iterations> 2000 </optimizer_max_iterations>
		<!--Print level for the optimizer, 0 - 3. 0=no printing, 3=detailed
		    printing, 2=in between-->
		<optimizer_print_level> 0 </optimizer_print_level>
		<!--Flag (true or false) indicating whether or not to compute average
		    residuals. No actions are taken based on this flag other than printing
		    the average residuals, which can be useful for seeing if the solution
		    is good.  Average residuals should be be close to 0.0.  If not, there
		    is likely problem in the experimental data, in the model, or both.-->
		<compute_average_residuals> true </compute_average_residuals>
		<!--Flag (true or false) indicating whether or not to make an adjustment
		    in the center of mass of a body to reduced DC offsets in MX and MZ. If
		    true, a new model is writen out that has altered anthropometry.-->
		<adjust_com_to_reduce_residuals> true </adjust_com_to_reduce_residuals>
		<!--Initial time used when computing average residuals in order to adjust
		    the body's center of mass.  If both initial and final time are set to
		    -1 (their default value) then the main initial and final time settings
		    will be used.-->
		<initial_time_for_com_adjustment>      -1.00000000 </initial_time_for_com_adjustment>
		<!--Final time used when computing average residuals in order to adjust
		    the body's center of mass.-->
		<final_time_for_com_adjustment>      -1.00000000 </final_time_for_com_adjustment>
		<!--Name of the body whose center of mass is adjusted. The heaviest
		    segment in the model should normally be chosen. For a gait model, the
		    torso segment is usually the best choice.-->
		<adjusted_com_body> torso </adjusted_com_body>
		<!--Name of the output model file (.osim) containing adjustments to
		    anthropometry made to reduce average residuals. This file is written
		    if the property adjust_com_to_reduce_residuals is set to true. If a
		    name is not specified, the model is written out to a file called
		    adjusted_model.osim.-->
		<output_model_file> C:\Projects\OpenSimBranch\OpenSim\Examples\Gait2354_Simbody\subject01_simbody_adjusted.osim </output_model_file>
		<!--Flag (true or false) indicating whether or not to adjust the
		    kinematics in order to reduce residuals.  Set this flag to false, and
		    set adjust_com_to_reduce_residuals on in order to only adjust the
		    model's center of mass without adjusting kinematics-->
		<adjust_kinematics_to_reduce_residuals> true </adjust_kinematics_to_reduce_residuals>
		<!--True-false flag indicating whether or not to turn on verbose printing
		    for cmc.-->
		<use_verbose_printing> false </use_verbose_printing>
	</CMCTool>
</OpenSimDocument>

