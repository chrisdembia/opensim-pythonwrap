/*
 * ActuatorsAndExternalLoadsPanel.java
 *
 * Created on July 23, 2007, 7:32 PM
 */

package org.opensim.tracking;

import javax.swing.JComboBox;
import org.opensim.modeling.BodySet;
import org.opensim.modeling.Model;

/**
 *
 * @author  erang
 */
public class ActuatorsAndExternalLoadsPanel extends javax.swing.JPanel {
   
   /** Creates new form ActuatorsAndExternalLoadsPanel */
   public ActuatorsAndExternalLoadsPanel() {
      initComponents();
   }

   public void updatePanel(AbstractToolModelWithExternalLoads toolModel, Model model) {
      keepModelActuators.setSelected(!toolModel.getReplaceActuatorSet());

      String str = "";
      for(int i=0; i<toolModel.getActuatorSetFiles().getSize(); i++)
         str += (i>0?", ":"") + toolModel.getActuatorSetFiles().getitem(i);
      actuatorSetFiles.setText(str);

      // Update combo boxes with body names
      for(JComboBox comboBox : new JComboBox[]{externalLoadsBody1, externalLoadsBody2}) {
         comboBox.removeAllItems();
         if(model==null) continue;
         BodySet bodySet = model.getDynamicsEngine().getBodySet();
         if(bodySet==null) continue;
         for(int i=0; i<bodySet.getSize(); i++) comboBox.addItem(bodySet.get(i).getName());
      }
      externalLoadsBody1.setSelectedItem(toolModel.getExternalLoadsBody1());
      externalLoadsBody2.setSelectedItem(toolModel.getExternalLoadsBody2());

      externalLoadsFileName.setFileName(toolModel.getExternalLoadsFileName(),false);
      externalLoadsModelKinematicsFileName.setFileName(toolModel.getExternalLoadsModelKinematicsFileName(),false);
      if(toolModel.getLowpassCutoffFrequencyForLoadKinematics()<0) {
         filterModelKinematics.setSelected(false);
         cutoffFrequency.setText("");
         cutoffFrequency.setEnabled(false);
      } else {
         filterModelKinematics.setSelected(true);
         cutoffFrequency.setText(((Double)toolModel.getLowpassCutoffFrequencyForLoadKinematics()).toString());
         cutoffFrequency.setEnabled(true);
      }
   }
   
   /** This method is called from within the constructor to
    * initialize the form.
    * WARNING: Do NOT modify this code. The content of this method is
    * always regenerated by the Form Editor.
    */
   // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
   private void initComponents() {
      jPanel3 = new javax.swing.JPanel();
      jLabel3 = new javax.swing.JLabel();
      jLabel4 = new javax.swing.JLabel();
      jLabel6 = new javax.swing.JLabel();
      filterModelKinematics = new javax.swing.JCheckBox();
      externalLoadsBody1 = new javax.swing.JComboBox();
      jLabel5 = new javax.swing.JLabel();
      jLabel7 = new javax.swing.JLabel();
      externalLoadsBody2 = new javax.swing.JComboBox();
      externalLoadsFileName = new org.opensim.swingui.FileTextFieldAndChooser();
      externalLoadsModelKinematicsFileName = new org.opensim.swingui.FileTextFieldAndChooser();
      cutoffFrequency = new javax.swing.JTextField();
      jLabel8 = new javax.swing.JLabel();
      jLabel9 = new javax.swing.JLabel();
      jPanel2 = new javax.swing.JPanel();
      keepModelActuators = new javax.swing.JCheckBox();
      jLabel1 = new javax.swing.JLabel();
      actuatorSetFiles = new javax.swing.JTextField();

      jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createEtchedBorder(), "External Loads"));
      jLabel3.setText("External loads");

      jLabel4.setText("Model kinematics for external loads");

      jLabel6.setText("Applied to bodies");

      filterModelKinematics.setText("Filter model kinematics");
      filterModelKinematics.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
      filterModelKinematics.setMargin(new java.awt.Insets(0, 0, 0, 0));

      externalLoadsBody1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

      jLabel5.setText("Body1:");

      jLabel7.setText("Body2:");

      externalLoadsBody2.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

      cutoffFrequency.setText("jTextField3");

      jLabel8.setText("Cutoff frequency");

      jLabel9.setText("Hz");

      org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
      jPanel3.setLayout(jPanel3Layout);
      jPanel3Layout.setHorizontalGroup(
         jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
         .add(jPanel3Layout.createSequentialGroup()
            .addContainerGap()
            .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
               .add(filterModelKinematics)
               .add(jLabel4)
               .add(jLabel6)
               .add(jLabel3))
            .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
               .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel3Layout.createSequentialGroup()
                  .add(27, 27, 27)
                  .add(jLabel5)
                  .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                  .add(externalLoadsBody1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 127, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                  .add(37, 37, 37)
                  .add(jLabel7)
                  .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                  .add(externalLoadsBody2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 139, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
               .add(jPanel3Layout.createSequentialGroup()
                  .add(26, 26, 26)
                  .add(jLabel8)
                  .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                  .add(cutoffFrequency, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 139, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                  .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                  .add(jLabel9)
                  .add(138, 138, 138))
               .add(jPanel3Layout.createSequentialGroup()
                  .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                  .add(externalLoadsFileName, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 400, Short.MAX_VALUE))
               .add(jPanel3Layout.createSequentialGroup()
                  .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                  .add(externalLoadsModelKinematicsFileName, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 400, Short.MAX_VALUE)))
            .addContainerGap())
      );
      jPanel3Layout.setVerticalGroup(
         jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
         .add(jPanel3Layout.createSequentialGroup()
            .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
               .add(jLabel3)
               .add(externalLoadsFileName, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(12, 12, 12)
            .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
               .add(externalLoadsBody1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
               .add(jLabel5)
               .add(jLabel7)
               .add(jLabel6)
               .add(externalLoadsBody2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
               .add(jLabel4)
               .add(externalLoadsModelKinematicsFileName, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(13, 13, 13)
            .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
               .add(cutoffFrequency, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
               .add(jLabel8)
               .add(filterModelKinematics)
               .add(jLabel9))
            .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
      );

      jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createEtchedBorder(), "Actuators"));
      keepModelActuators.setText("Include actuators from model file");
      keepModelActuators.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
      keepModelActuators.setMargin(new java.awt.Insets(0, 0, 0, 0));

      jLabel1.setText("Additional actuator set files");

      actuatorSetFiles.setText("jTextField2");

      org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
      jPanel2.setLayout(jPanel2Layout);
      jPanel2Layout.setHorizontalGroup(
         jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
         .add(jPanel2Layout.createSequentialGroup()
            .addContainerGap()
            .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
               .add(keepModelActuators)
               .add(jPanel2Layout.createSequentialGroup()
                  .add(jLabel1)
                  .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                  .add(actuatorSetFiles, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 439, Short.MAX_VALUE)))
            .addContainerGap())
      );
      jPanel2Layout.setVerticalGroup(
         jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
         .add(jPanel2Layout.createSequentialGroup()
            .add(keepModelActuators)
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
               .add(jLabel1)
               .add(actuatorSetFiles, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
      );

      org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(this);
      this.setLayout(layout);
      layout.setHorizontalGroup(
         layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
         .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
            .addContainerGap()
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
               .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
               .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addContainerGap())
      );
      layout.setVerticalGroup(
         layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
         .add(layout.createSequentialGroup()
            .addContainerGap()
            .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(jPanel3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
      );
   }// </editor-fold>//GEN-END:initComponents
   
   
   // Variables declaration - do not modify//GEN-BEGIN:variables
   private javax.swing.JTextField actuatorSetFiles;
   private javax.swing.JTextField cutoffFrequency;
   private javax.swing.JComboBox externalLoadsBody1;
   private javax.swing.JComboBox externalLoadsBody2;
   private org.opensim.swingui.FileTextFieldAndChooser externalLoadsFileName;
   private org.opensim.swingui.FileTextFieldAndChooser externalLoadsModelKinematicsFileName;
   private javax.swing.JCheckBox filterModelKinematics;
   private javax.swing.JLabel jLabel1;
   private javax.swing.JLabel jLabel3;
   private javax.swing.JLabel jLabel4;
   private javax.swing.JLabel jLabel5;
   private javax.swing.JLabel jLabel6;
   private javax.swing.JLabel jLabel7;
   private javax.swing.JLabel jLabel8;
   private javax.swing.JLabel jLabel9;
   private javax.swing.JPanel jPanel2;
   private javax.swing.JPanel jPanel3;
   private javax.swing.JCheckBox keepModelActuators;
   // End of variables declaration//GEN-END:variables
   
}
