<?xml version="1.0" encoding="UTF-8"?>
<CMCTool name="subject01_walk1">
	<!--Name of the model library to load. Do not include the library
	    extension (e.g., .dll or .lib).-->
	<!--<model_library> gait23 </model_library>-->
	<!--Name of the .osim file used to construct a model.-->
	<model_file> subject01_simbody_adjusted.osim </model_file>
	<!--Replace the model's actuator set with sets specified in
	    <force_set_files>? If false, the actuator set is appended to.-->
	<replace_force_set> false </replace_force_set>
	<!--List of xml files used to construct an actuator set for the model.-->
	<force_set_files> gait2354_CMC_Actuators.xml </force_set_files>
	<!--Directory used for writing results.-->
	<results_directory> ./subject01_ResultsCMC </results_directory>
	<!--Output precision.  It is 8 by default.-->
	<output_precision> 20 </output_precision>
	<!--Initial time for the simulation.-->
	<initial_time> 0.76 </initial_time>
	<!--Final time for the simulation.-->
	<final_time> 1.24 </final_time>
	<!--Maximum number of integrator steps.-->
	<maximum_number_of_integrator_steps> 30000 </maximum_number_of_integrator_steps>
	<!--Maximum integration step size.-->
	<maximum_integrator_step_size> 1.0 </maximum_integrator_step_size>
  <!--Minimum integration step size.-->
  <minimum_integrator_step_size>  1e-9 </minimum_integrator_step_size>
	<!--Integrator error tolerance. When the error is greater, the integrator
	    step size is decreased.-->
	<integrator_error_tolerance> 1e-6 </integrator_error_tolerance>
	<!--Set of analyses to be run during the investigation.-->

	<!--Motion (.mot) or storage (.sto) file containing the desired kinematic
	    trajectories.-->
	<desired_kinematics_file> subject01_walk1_RRA_Kinematics_initial_q.sto </desired_kinematics_file>
	<!--Low-pass cut-off frequency for filtering the desired kinematics. A
	    negative value results in no filtering. The default value is -1.0, so
	    no filtering.-->
	<lowpass_cutoff_frequency> -10 </lowpass_cutoff_frequency>
	<!--File containing the constraints on the controls.-->
	<constraints_file> gait2354_CMC_ControlConstraints.xml </constraints_file>

	<!--Motion file (.mot) or storage file (.sto) containing the external
	    loads applied to the model.-->
    <external_loads_file> subject01_externalForces.xml </external_loads_file>
	<!--Motion file (.mot) or storage file (.sto) containing the model
	    kinematics corresponding to the external loads.-->
	<external_loads_model_kinematics_file> subject01_walk1_ik.mot </external_loads_model_kinematics_file>
	<!--Name of the body to which the first set of external loads should be
	    applied (e.g., the name of the right foot).-->
	<external_loads_body1> calcn_r </external_loads_body1>
	<!--Name of the body to which the second set of external loads should be
	    applied (e.g., the name of the left foot).-->
	<external_loads_body2> calcn_l </external_loads_body2>
	<!--Low-pass cut-off frequency for filtering the model kinematics
	    corresponding to the external loads. A negative value results in no
	    filtering. The default value is -1.0, so no filtering.-->
	<lowpass_cutoff_frequency_for_load_kinematics> 6 </lowpass_cutoff_frequency_for_load_kinematics>

	<!--Perturbation size used by the optimizer to compute numerical
	    derivatives. A value between 1.0e-4 and 1.0e-8 is usually
	    approprieate.-->
	<optimizer_derivative_dx> 1 </optimizer_derivative_dx>
	<!--Convergence criterion for the optimizer. The smaller this value, the
	    deeper the convergence. Decreasing this number can improve a solution,
	    but will also likely increase computation time.-->
	<optimizer_convergence_criterion> 1e-004 </optimizer_convergence_criterion>
	<!--Maximum number of iterations for the optimizer.-->
	<optimizer_max_iterations> 200 </optimizer_max_iterations>
	<!--Print level for the optimizer, 0 - 3. 0=no printing, 3=detailed
	    printing, 2=in between-->
	<optimizer_print_level> 0 </optimizer_print_level>
	<!--Specify which optimizer to use (ipopt or cfsqp).-->
	<optimizer_algorithm> ipopt </optimizer_algorithm>

	<!--Flag (true or false) indicating whether or not to compute average
	    residuals. No actions are taken based on this flag other than printing
	    the average residuals, which can be useful for seeing if the solution
	    is good.  Average residuals should be be close to 0.0.  If not, there
	    is likely problem in the experimental data, in the model, or both.-->
	<compute_average_residuals> false </compute_average_residuals>
	<!--Flag (true or false) indicating whether or not to make an adjustment
	    in the center of mass of a body to reduced DC offsets in MX and MZ. If
	    true, a new model is writen out that has altered anthropometry.-->
	<adjust_com_to_reduce_residuals> false </adjust_com_to_reduce_residuals>
	<use_verbose_printing> false </use_verbose_printing>

        <!--Time window over which the desired actuator forces are achieved.
          Muscles forces cannot change instantaneously, so a finite time window
          must be allowed. The recommended time window for RRA is about 0.001
          sec, and for CMC is about 0.010 sec.-->
        <cmc_time_window> 0.010000000 </cmc_time_window>

        <!--Flag (true or false) indicating whether or not to use the curvature
                 filter. Setting this flag to true can reduce oscillations in the
                 computed muscle excitations.-->
        <use_curvature_filter> false </use_curvature_filter>
        <!--Flag (true or false) indicating whether to use the fast CMC
            optimization target. The fast target requires the desired
            accelerations to be met. The optimizer fails if the acclerations
            constraints cannot be met, so the fast target can be less robust.  The
            regular target does not require the acceleration constraints to be
            met; it meets them as well as it can, but it is slower and less
            accurate.-->
        <use_fast_optimization_target> true </use_fast_optimization_target>
             <!--File containing the tracking tasks. Which coordinates are tracked and
                with what weights are specified here.-->
         <task_set_file> gait2354_CMC_Tasks.xml </task_set_file>
</CMCTool>

